<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Mi Receta</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <header>
        <h1>Dashboard</h1>
        <button onclick="signOutUser()">Cerrar sesión</button>
    </header>
    <main>
        <h2>Bienvenido, <span id="user-name"></span></h2>
        <div class="dashboard-content">
            <button onclick="showCreatePrescriptionForm()">Crear receta</button>
            <div id="create-prescription-form" style="display: none;">
                <h3>Crear Nueva Receta</h3>
                <form onsubmit="event.preventDefault(); createPrescription();">
                    <label for="patient-name">Nombre del Paciente:</label>
                    <input type="text" id="patient-name" required>
                    <label for="medication-name">Nombre del Medicamento:</label>
                    <input type="text" id="medication-name" required>
                    <label for="dosis">Dosis:</label>
                    <input type="text" id="dosis" required>
                    <button type="submit">Crear Receta</button>
                </form>
            </div>
            <div id="edit-prescription-form" style="display: none;">
                <h3>Editar Receta</h3>
                <form onsubmit="event.preventDefault(); saveEditedPrescription();">
                    <input type="hidden" id="edit-prescription-id">
                    <label for="edit-patient-name">Nombre del Paciente:</label>
                    <input type="text" id="edit-patient-name" required>
                    <label for="edit-medication-name">Nombre del Medicamento:</label>
                    <input type="text" id="edit-medication-name" required>
                    <label for="edit-dosis">Dosis:</label>
                    <input type="text" id="edit-dosis" required>
                    <button type="submit">Guardar Cambios</button>
                </form>
            </div>
        </div>
        <div id="prescription-list" class="prescription-list">
            <!-- La lista de recetas se llenará dinámicamente aquí -->
        </div>
    </main>
    <script type="module" src="js/main.js"></script>
    <script type="module">
        import { signOutUser, showCreatePrescriptionForm, createPrescription, loadPrescriptions, saveEditedPrescription, deletePrescription, showEditPrescriptionForm  } from './js/dashboard.js';

        window.signOutUser = signOutUser;
        window.showCreatePrescriptionForm = showCreatePrescriptionForm;
        window.createPrescription = createPrescription;
        window.saveEditedPrescription = saveEditedPrescription;
        window.deletePrescription = deletePrescription;
        window.showEditPrescriptionForm =showEditPrescriptionForm;

        document.addEventListener('DOMContentLoaded', () => {
            loadPrescriptions();
        });
    </script>
</body>
</html>
